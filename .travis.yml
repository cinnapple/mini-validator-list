language: node_js
node_js:
  - "10"

services:
  - "docker"

before_install:
  - chmod +x ./.travis/main.sh
  - "./.travis/main.sh"
script:
  - "make build"
  - "make build-image"
after_success:
  - if [[ "$TRAVIS_BRANCH" == "master" ]]; then
    docker login -u $DOCKER_USERNAME -p $DOCKER_PASSWORD ;
    make push-image;
    fi
